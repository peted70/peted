---
layout: single
title: HoloLens Voice Commands
date: 2016-11-16 16:25
author_profile: true
comments: true
categories: [HoloLens, HoloLens, HoloToolkit, Unity, voice]
header:
    teaserlogo: 'assets/images/'
    teaser: 'assets/images/'
---
<p><a href="http://peted.azurewebsites.net/wp-content/uploads/2016/11/voicecommands.png"><img title="voicecommands" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="voicecommands" src="http://peted.azurewebsites.net/wp-content/uploads/2016/11/voicecommands_thumb.png" width="747" height="857"></a>&nbsp;</p> <blockquote> <p>This is the fourth part of a series see <a href="https://peted.azurewebsites.net/hololens-end-to-end-in-unity/">https://peted.azurewebsites.net/hololens-end-to-end-in-unity/</a></a> Steps to create the demo project that I used in my Future Decoded UK 2016 presentation</p></blockquote> <blockquote> <p>To get set up with the HoloToolkit in Unity see <a title="https://mtaulty.com/2016/11/10/hitchiking-the-holotoolkit-unity-leg-1/" href="https://mtaulty.com/2016/11/10/hitchiking-the-holotoolkit-unity-leg-1/">https://mtaulty.com/2016/11/10/hitchiking-the-holotoolkit-unity-leg-1/</a></p></blockquote> <h2>KeywordManager</h2> <p>This is all about the <strong>KeywordManager</strong> from the <strong><a href="https://github.com/Microsoft/HoloToolkit" target="_blank">HoloToolkit</a></strong>; this enables you to define voice commands and have them dispatched at runtime to an object and function that you specify in the Unity editor. So, the first step is to locate the <strong>KeywordManager</strong> script in the <strong>HoloToolkit</strong> (Tip: use the project pane search box) and drag the <strong>KeywordManager</strong> script onto your Managers game object (see the GAZE <a href="https://peted.azurewebsites.net/hololens-gaze/" target="_blank">post</a>). Then selecting the Managers object in the Unity Editor will show the following in the Inspector panel:</p> <p><a href="http://peted.azurewebsites.net/wp-content/uploads/2016/11/keywordmanager.png"><img title="keywordmanager" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="keywordmanager" src="http://peted.azurewebsites.net/wp-content/uploads/2016/11/keywordmanager_thumb.png" width="733" height="256"></a>&nbsp;</p> <p>First, set the Keywords And Responses Size value to 1</p> <p><a href="http://peted.azurewebsites.net/wp-content/uploads/2016/11/addkeyword.png"><img title="addkeyword" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="addkeyword" src="http://peted.azurewebsites.net/wp-content/uploads/2016/11/addkeyword_thumb.png" width="733" height="466"></a></p> <p>Then add your keyword (I used “Reset Stage” in my demo)</p> <p>Click the ‘+’ symbol to add a receiver object reference and function to be called automatically when the voice command is detected.</p> <p><a href="http://peted.azurewebsites.net/wp-content/uploads/2016/11/keywordreceiver.png"><img title="keywordreceiver" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="keywordreceiver" src="http://peted.azurewebsites.net/wp-content/uploads/2016/11/keywordreceiver_thumb.png" width="740" height="182"></a></p> <p>In the input box which has None (Object) you can drag an object from the scene hierarchy panel and it will be set as the object reference. For my demo I dragged the <strong>StackedBottles</strong> object which is the parent to the bottles after having added a function called <strong>ResetBottles</strong> to a script <strong>StackedBottles</strong>.<strong>cs</strong> which I added to the <strong>StackedBottles</strong> game object.</p><script src="https://gist.github.com/peted70/2fd81ac49fa2b616aa75800b32e39702.js"></script> <p>Which calls through to the <strong>BottleScript</strong>.<strong>cs</strong> script with the following code</p><script src="https://gist.github.com/peted70/ee0ddcef4b759481c895cef7a6ebdae8.js"></script> <p>So, the position and rotation of the individual bottle is cached up front and the Reset function will restore the initial position and rotation.</p> <blockquote> <p>Note. The call to GetComponent&lt;Rigidbody&gt;().Sleep(); will prevent the physics engine from running whilst the bottles are being reset enabling us to position them all before they all start to fall over.</p></blockquote> <blockquote> <p>Also note that there is a dropdown with the options Off, Runtime Only, Editor &amp; Runtime – and… this works in the Unity editor if you select Editor &amp; Runtime implemented, I guess with older .NET APIs to do the speech recognition.</p></blockquote> <p>This shows the result:</p> <p><iframe height="315" src="https://www.youtube.com/embed/rAvF5dvGNUg" frameborder="0" width="560" allowfullscreen></iframe></p> <blockquote> <p>All resources used are available on Github <a href="https://github.com/peted70/fd-holodemo">https://github.com/peted70/fd-holodemo</a> (see the <a href="https://github.com/peted70/fd-holodemo/tree/VOICE" target="_blank">VOICE</a> branch)</p></blockquote>
