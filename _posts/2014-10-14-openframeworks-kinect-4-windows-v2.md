---
layout: single
title: Openframeworks + Kinect 4 Windows V2
date: 2014-10-14 10:25
author_profile: true
comments: true
categories: [Kinect, WinRT]
header:
    teaserlogo: 'assets/images/'
    teaser: 'assets/images/'
---
<h3>OpenFrameworks</h3> <p>I am in the process of reviewing various frameworks for visualising my Kinect windows store apps because prototyping ideas Direct3D is a bit labour intensive. My attention has turned towards <a href="http://http://openframeworks.cc/">Openframeworks</a>. This is the official description: </p> <ul> <li></li></ul> <h5>openFrameworks is an <a href="http://openframeworks.cc/about/license.html">open source</a> <a href="https://en.wikipedia.org/wiki/C%2B%2B">C++</a> toolkit designed to assist the creative process by providing a simple and intuitive framework for experimentation.</h5> <p>The project is designed to be a wrapper around other creative open frameworks; here are some it pulls in:</p> <p>&nbsp; <ul> <li><a href="http://www.opengl.org/">OpenGL</a>, <a href="http://glew.sourceforge.net/">GLEW</a>, <a href="http://www.opengl.org/resources/libraries/glut/">GLUT</a>, <a href="https://code.google.com/p/libtess2/">libtess2</a> and <a href="http://cairographics.org/">cairo</a> for graphics  <li><a href="http://www.music.mcgill.ca/~gary/rtaudio/">rtAudio</a>, <a href="http://www.portaudio.com/">PortAudio</a>, <a href="http://http//connect.creativelabs.com/openal">OpenAL</a> and <a href="http://kissfft.sourceforge.net/">Kiss FFT</a> or <a href="http://www.fmod.org/">FMOD</a> for audio input, output and analysis  <li><a href="http://freetype.sourceforge.net/index2.html">FreeType</a> for fonts  <li><a href="http://freeimage.sourceforge.net/">FreeImage</a> for image saving and loading  <li><a href="http://developer.apple.com/quicktime/">Quicktime</a>, <a href="http://gstreamer.freedesktop.org/">GStreamer</a> and <a href="https://github.com/ofTheo/videoInput">videoInput</a> for video playback and grabbing  <li><a href="http://pocoproject.org/">Poco</a> for a variety of utilities  <li><a href="http://opencv.org/">OpenCV</a> for computer vision  <li><a href="http://assimp.sourceforge.net/">Assimp</a> for 3D model loading</li></ul> <p>&nbsp;</p> <p>This sounds ideal for my requirements</p> <p>&nbsp;</p> <h3>WINDOWS STORE APP</h3> <p>Retrieving the source from here <a title="https://github.com/MSOpenTech/openFrameworks" href="https://github.com/MSOpenTech/openFrameworks">https://github.com/MSOpenTech/openFrameworks</a> instead of usual OpenFrameworks source tree helps as MS Open Tech have done the work to create an OF Project generator which supports Windows Store Applications. This includes the conversion from OpenGL to DirectX and retaining the structure of an OF app so existing apps could be just dropped into place. There is a re-built project generator exe located here \msopentechopenframeworks\openFrameworks\projectGenerator\projectGeneratorSimple_winrt.exe </p> <p>&nbsp;</p> <p><a href="{{ site.baseurl }}/assets/images/2014/10/winrt_of_project_generator.png"><img title="winrt_of_project_generator" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="winrt_of_project_generator" src="{{ site.baseurl }}/assets/images/2014/10/winrt_of_project_generator_thumb.png" width="638" height="392"></a> </p> <p>which will generate a Windows Store c++ project with OF set up and ready to go. </p> <p>&nbsp;</p> <p><a href="{{ site.baseurl }}/assets/images/2014/10/OF_project_structure.png"><img title="OF_project_structure" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" border="0" alt="OF_project_structure" src="{{ site.baseurl }}/assets/images/2014/10/OF_project_structure_thumb.png" width="347" height="614"></a> </p> <p></p> <p>Let’s go through the items in this project to gain a better understanding of what happens when the app runs.</p> <p>&nbsp;</p> <p>The windows app project is a c++/DirectX windows store app project which makes use of a <a href="http://msdn.microsoft.com/library/windows/apps/Hh702626">SwapChainBackgroundPanel</a> which effectively allows you to compose XAML UI elements over a full-screen DirectX rendering context. The source code for OpenFrameworks is included in the solution as a separate project. <a href="https://code.google.com/p/angleproject/">Project Angle</a> is utilised to carry out the translation from OpenGL to DirectX (see <a title="http://msopentech.com/blog/2013/12/20/msopentechcontributestoangle/" href="http://msopentech.com/blog/2013/12/20/msopentechcontributestoangle/">http://msopentech.com/blog/2013/12/20/msopentechcontributestoangle/</a> for further info about this) as can be seen in the source files AngleBase.h and AngleBase.cpp.</p> <p>&nbsp;</p> <p>Running the app out of the box gives (note I am running Windows 10 preview hence the window adornments):</p> <p><a href="{{ site.baseurl }}/assets/images/2014/10/outofboxapp.png"><img title="outofboxapp" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="outofboxapp" src="{{ site.baseurl }}/assets/images/2014/10/outofboxapp_thumb.png" width="609" height="382"></a> </p> <p>One piece of the project structure I didn’t previously mention is the ‘src’ folder which contains the OF app itself. The code contains a class which has methods for a drawing loop and also stubs for responding to various events mouse, keyboard, etc. So the idea is that you can just fill the stubs with your OF code.</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:8dc19d1f-731b-46c5-8730-f364e49753a7" class="wlWriterEditableSmartContent" style="width: 359px; float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">setup</span><span style="background:#1e1e1e;color:#b4b4b4">(){</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">update</span><span style="background:#1e1e1e;color:#b4b4b4">(){</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">draw</span><span style="background:#1e1e1e;color:#b4b4b4">(){</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">keyPressed</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">key</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">keyReleased</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">key</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">mouseMoved</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">x</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">y</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">mouseDragged</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">x</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">y</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">button</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">mousePressed</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">x</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">y</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">button</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">mouseReleased</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">x</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">y</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">button</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">windowResized</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">w</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">h</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">gotMessage</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">ofMessage</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">msg</span><span style="background:#1e1e1e;color:#b4b4b4">){</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">dragEvent</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">ofDragInfo</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">dragInfo</span><span style="background:#1e1e1e;color:#b4b4b4">){</span><span style="background:#1e1e1e;color:#dcdcdc"> </span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> </ol> </div> </div> </div> <p></p> <p>I’m not yet familiar with the OF API so for illustrative purposes I’ll have a crack at rendering the colour stream from a Kinect v2 device.</p> <p>&nbsp;</p> <h3>KINECT</h3> <p>To get started I will add a reference to the Kinect SDK to the Windows Store project – you can do this by right-clicking the project (in the solution explorer) and choosing &gt; Add &gt; References</p> <p><a href="{{ site.baseurl }}/assets/images/2014/10/add_refs.png"><img title="add_refs" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="add_refs" src="{{ site.baseurl }}/assets/images/2014/10/add_refs_thumb.png" width="609" height="516"></a> </p> <p>Choose to ‘Add New Reference’ and select Extensions and as long as you have the Kinect SDK installed correctly you will see</p> <p><a href="{{ site.baseurl }}/assets/images/2014/10/add_kinectsdk.png"><img title="add_kinectsdk" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="add_kinectsdk" src="{{ site.baseurl }}/assets/images/2014/10/add_kinectsdk_thumb.png" width="501" height="539"></a> </p> <p>WindowsPreview.Kinect in there. Choose that and you should be good to go.</p> <p>I copied some code from a previous post <a href="{{site.baseurl}}/c++/kinect/rx/winrt/2014/08/20/face-tracking-native-kinect-4-windows-v2.html">Face Tracking Native – Kinect 4 Windows v2</a> which displayed the colour stream from the Kinect in a WriteableBitmap. This time the code will pull the colour frames from within the OF update() method and copy the image pixels to an ofImage object which will be used to draw the images with a call to ofImage::draw() from within the apps draw() method. The code for the update and draw methods is shown here:</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:31db3485-95ca-4f5e-9e0c-075edbfaa3d5" class="wlWriterEditableSmartContent" style="width: 886px; float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">update</span><span style="background:#1e1e1e;color:#b4b4b4">()</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#57a64a">// Pull the frame...</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">multiFrame</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#dadada">_multiFrameReader</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">AcquireLatestFrame</span><span style="background:#1e1e1e;color:#b4b4b4">();</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">multiFrame</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">!=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">nullptr</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">multiFrame</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">ColorFrameReference</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">!=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">nullptr</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">colorFrame</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">multiFrame</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">ColorFrameReference</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">AcquireFrame</span><span style="background:#1e1e1e;color:#b4b4b4">();</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">colorFrame</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">!=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">nullptr</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li>                <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">                    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">colorFrame</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">CopyConvertedFrameDataToArray</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#dadada">_colorPixels</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ColorImageFormat</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#b8d7a3">Rgba</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>                    <span style="background:#1e1e1e;color:#dcdcdc"></span></li> <li class="le-pavsc-even">                    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_img</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">setFromPixels</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#dadada">_colorPixels</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Data</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">colorFrame</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">FrameDescription</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Width</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">colorFrame</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">FrameDescription</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Height</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofImageType</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#b8d7a3">OF_IMAGE_COLOR_ALPHA</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>                    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_colorFrameProcessed</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">true</span><span style="background:#1e1e1e;color:#b4b4b4">;</span></li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#57a64a">//--------------------------------------------------------------</span></li> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">draw</span><span style="background:#1e1e1e;color:#b4b4b4">()</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">ofClear</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">255</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(!</span><span style="background:#1e1e1e;color:#dadada">_kinect</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">IsAvailable</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">ofDrawBitmapString</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#d69d85">&quot;No Kinect&quot;</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">50</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">10</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">return</span><span style="background:#1e1e1e;color:#b4b4b4">;</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_img</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">draw</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> </ol> </div> </div> </div> <p>The project can be downloaded here <a title="http://1drv.ms/1vqiSd0" href="http://1drv.ms/1vqiSd0">http://1drv.ms/1vqiSd0</a>. I’m hoping this will come in handy the next time I need to quickly create a creative prototype.&nbsp;&nbsp; </p>
