---
layout: page
title: 
date: 2020-07-17 17:08
author: peted70
comments: true
categories: []
---
<!-- wp:paragraph -->
<p>#&nbsp;AAD&nbsp;Login&nbsp;on&nbsp;HoloLens&nbsp;2<br>![Eye](./images/eye.png)<br>Here's&nbsp;a&nbsp;short&nbsp;video&nbsp;of&nbsp;the&nbsp;sample&nbsp;app&nbsp;that&nbsp;goes&nbsp;with&nbsp;this&nbsp;post:<br>[![Demo&nbsp;Video](https://img.youtube.com/vi/7yz7hTNMxBY/0.jpg)](https://www.youtube.com/watch?v=7yz7hTNMxBY)<br>The&nbsp;code&nbsp;is&nbsp;all&nbsp;found&nbsp;on&nbsp;Github&nbsp;[here](https://github.com/peted70/aad-hololens)<br>One&nbsp;of&nbsp;the&nbsp;coolest&nbsp;aspects&nbsp;of&nbsp;HoloLens2&nbsp;is&nbsp;the&nbsp;iris&nbsp;login&nbsp;as&nbsp;it&nbsp;removes&nbsp;the&nbsp;need&nbsp;for&nbsp;typing&nbsp;on&nbsp;a&nbsp;virtual&nbsp;keyboard.&nbsp;So&nbsp;a&nbsp;cool&nbsp;feature&nbsp;which&nbsp;avoids&nbsp;the&nbsp;need&nbsp;for&nbsp;the&nbsp;coolest&nbsp;feature!&nbsp;Although&nbsp;hand-tracked&nbsp;typing&nbsp;is&nbsp;arguably&nbsp;the&nbsp;coolest&nbsp;feature&nbsp;it&nbsp;can&nbsp;become&nbsp;tiring&nbsp;when&nbsp;needed&nbsp;over&nbsp;and&nbsp;over...<br>So&nbsp;set&nbsp;up&nbsp;your&nbsp;HoloLens2&nbsp;device&nbsp;using&nbsp;AAD&nbsp;credentials&nbsp;and&nbsp;then&nbsp;configure&nbsp;the&nbsp;device&nbsp;to&nbsp;use&nbsp;Iris&nbsp;login&nbsp;as&nbsp;shown&nbsp;below:<br>![HL2&nbsp;Iris&nbsp;Scan](./images/hololens-iris-settings.png)<br>An&nbsp;app&nbsp;to&nbsp;configure&nbsp;will&nbsp;run&nbsp;and&nbsp;guide&nbsp;you&nbsp;to&nbsp;watch&nbsp;a&nbsp;moving&nbsp;animation.<br>![HL2&nbsp;Iris&nbsp;Scan&nbsp;Complete](./images/scan-complete.png)<br>&gt;&nbsp;You&nbsp;can&nbsp;now&nbsp;add&nbsp;up&nbsp;to&nbsp;64&nbsp;other&nbsp;users&nbsp;logging&nbsp;in&nbsp;via&nbsp;AAD&nbsp;and&nbsp;have&nbsp;the&nbsp;device&nbsp;be&nbsp;shared&nbsp;by&nbsp;signing&nbsp;in&nbsp;an&nbsp;out.&nbsp;We'll&nbsp;see&nbsp;how&nbsp;this&nbsp;can&nbsp;be&nbsp;extended&nbsp;into&nbsp;an&nbsp;app&nbsp;later&nbsp;in&nbsp;the&nbsp;article.<br>I&nbsp;have&nbsp;previously&nbsp;written&nbsp;a&nbsp;little&nbsp;about&nbsp;the&nbsp;topic&nbsp;of&nbsp;retrieving&nbsp;Azure&nbsp;Active&nbsp;Directory&nbsp;(AAD)&nbsp;OAuth2&nbsp;identity&nbsp;and&nbsp;access&nbsp;tokens&nbsp;on&nbsp;a&nbsp;HoloLens&nbsp;device.<br>&gt;&nbsp;If&nbsp;this&nbsp;topic&nbsp;is&nbsp;new&nbsp;to&nbsp;you&nbsp;I&nbsp;would&nbsp;suggest&nbsp;reading&nbsp;through&nbsp;the&nbsp;identity&nbsp;platform&nbsp;overview&nbsp;[here](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-overview)<br>I&nbsp;focused&nbsp;on&nbsp;specific&nbsp;topics&nbsp;such&nbsp;as&nbsp;how&nbsp;to&nbsp;retrieve&nbsp;a&nbsp;token&nbsp;to&nbsp;access&nbsp;the&nbsp;Microsoft&nbsp;Graph&nbsp;API&nbsp;using&nbsp;Microsoft&nbsp;Authentication&nbsp;Library&nbsp;for&nbsp;.NET&nbsp;(MSAL)&nbsp;using&nbsp;the&nbsp;OAuth&nbsp;delegated&nbsp;flow&nbsp;and&nbsp;device&nbsp;code&nbsp;flows.&nbsp;You&nbsp;can&nbsp;see&nbsp;code&nbsp;and&nbsp;read&nbsp;about&nbsp;those&nbsp;[here](http://peted.azurewebsites.net/microsoft-graph-auth-on-hololens/)&nbsp;and&nbsp;[here](http://peted.azurewebsites.net/microsoft-graph-auth-on-hololens-device-code-flow/).&nbsp;There&nbsp;are&nbsp;some&nbsp;complications&nbsp;and&nbsp;potential&nbsp;blockers&nbsp;for&nbsp;those&nbsp;trying&nbsp;to&nbsp;set&nbsp;this&nbsp;up&nbsp;for&nbsp;the&nbsp;first&nbsp;time&nbsp;and,&nbsp;in&nbsp;my&nbsp;experience&nbsp;there&nbsp;is&nbsp;quite&nbsp;a&nbsp;lot&nbsp;of&nbsp;misunderstanding&nbsp;around&nbsp;the&nbsp;topics&nbsp;of&nbsp;auth&nbsp;in&nbsp;general.&nbsp;In&nbsp;my&nbsp;role&nbsp;at&nbsp;Microsoft&nbsp;I&nbsp;have&nbsp;worked&nbsp;through&nbsp;some&nbsp;of&nbsp;these&nbsp;issues&nbsp;for&nbsp;customers&nbsp;and&nbsp;I&nbsp;get&nbsp;asked&nbsp;a&nbsp;lot&nbsp;about&nbsp;how&nbsp;to&nbsp;set&nbsp;up&nbsp;auth&nbsp;correctly&nbsp;to&nbsp;access&nbsp;Graph&nbsp;APIs,&nbsp;your&nbsp;own&nbsp;APIs&nbsp;and&nbsp;Mixed&nbsp;Reality&nbsp;services.&nbsp;Often&nbsp;samples&nbsp;for&nbsp;services&nbsp;will&nbsp;skirt&nbsp;the&nbsp;issue&nbsp;by&nbsp;using&nbsp;secrets&nbsp;embedded&nbsp;into&nbsp;a&nbsp;client&nbsp;side&nbsp;application&nbsp;which&nbsp;you&nbsp;can&nbsp;configure&nbsp;with&nbsp;your&nbsp;own&nbsp;set&nbsp;of&nbsp;secrets&nbsp;for&nbsp;your&nbsp;service&nbsp;instances.&nbsp;This&nbsp;is&nbsp;fine&nbsp;for&nbsp;a&nbsp;demo&nbsp;and&nbsp;a&nbsp;first-try&nbsp;of&nbsp;the&nbsp;services&nbsp;in&nbsp;question&nbsp;but&nbsp;as&nbsp;soon&nbsp;as&nbsp;you&nbsp;turn&nbsp;your&nbsp;thoughts&nbsp;to&nbsp;developing&nbsp;production&nbsp;code&nbsp;falls&nbsp;down&nbsp;immediately&nbsp;and&nbsp;the&nbsp;first&nbsp;task&nbsp;you&nbsp;will&nbsp;be&nbsp;faced&nbsp;with&nbsp;is&nbsp;how&nbsp;to&nbsp;secure&nbsp;access&nbsp;to&nbsp;your&nbsp;services.&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;cover&nbsp;the&nbsp;OAuth&nbsp;2.0&nbsp;Authorization&nbsp;Code&nbsp;Grant&nbsp;which&nbsp;you&nbsp;can&nbsp;read&nbsp;about&nbsp;here&nbsp;[OAuth&nbsp;Grant&nbsp;Types](https://oauth.net/2/grant-types/authorization-code/)&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;understand&nbsp;the&nbsp;details&nbsp;of&nbsp;the&nbsp;flow.<br>&gt;&nbsp;In&nbsp;brief,&nbsp;the&nbsp;scenario&nbsp;I&nbsp;am&nbsp;talking&nbsp;about&nbsp;is&nbsp;when&nbsp;an&nbsp;end&nbsp;user&nbsp;provides&nbsp;permissions&nbsp;for&nbsp;an&nbsp;app&nbsp;to&nbsp;access&nbsp;services&nbsp;that&nbsp;the&nbsp;user&nbsp;has&nbsp;access&nbsp;to&nbsp;on&nbsp;their&nbsp;behalf.&nbsp;The&nbsp;end&nbsp;user&nbsp;does&nbsp;this&nbsp;by&nbsp;authenticating&nbsp;and&nbsp;consenting&nbsp;to&nbsp;a&nbsp;set&nbsp;of&nbsp;permissions&nbsp;known&nbsp;as&nbsp;scopes.&nbsp;The&nbsp;consented&nbsp;scopes&nbsp;are&nbsp;encapsulated&nbsp;within&nbsp;the&nbsp;access&nbsp;token&nbsp;itself.<br>I&nbsp;won't&nbsp;cover,&nbsp;for&nbsp;instance&nbsp;Client&nbsp;Credentials&nbsp;flow&nbsp;which&nbsp;is&nbsp;used&nbsp;in&nbsp;an&nbsp;app&nbsp;to&nbsp;service&nbsp;scenario&nbsp;not&nbsp;involving&nbsp;a&nbsp;user.<br>So,&nbsp;it&nbsp;seems&nbsp;pretty&nbsp;simple&nbsp;so&nbsp;far&nbsp;so&nbsp;why&nbsp;the&nbsp;need&nbsp;for&nbsp;this&nbsp;post?&nbsp;These&nbsp;are&nbsp;the&nbsp;complications&nbsp;that&nbsp;I&nbsp;associate&nbsp;with&nbsp;this:<br>-&nbsp;Which&nbsp;APIs&nbsp;or&nbsp;framework&nbsp;should&nbsp;I&nbsp;use?<br>-&nbsp;The&nbsp;acquisition&nbsp;of&nbsp;an&nbsp;OAuth&nbsp;token&nbsp;requires&nbsp;a&nbsp;browser&nbsp;doesn't&nbsp;it?&nbsp;So,&nbsp;how&nbsp;can&nbsp;I&nbsp;do&nbsp;this&nbsp;in&nbsp;Unity&nbsp;without&nbsp;buying&nbsp;a&nbsp;browser&nbsp;plugin?<br>-&nbsp;How&nbsp;do&nbsp;I&nbsp;configure&nbsp;my&nbsp;Azure&nbsp;Active&nbsp;Directory&nbsp;to&nbsp;access&nbsp;services&nbsp;and&nbsp;use&nbsp;role-based&nbsp;access&nbsp;control?<br>-&nbsp;I'm&nbsp;already&nbsp;logged&nbsp;into&nbsp;the&nbsp;HoloLens&nbsp;can&nbsp;I&nbsp;not&nbsp;just&nbsp;access&nbsp;the&nbsp;token&nbsp;already&nbsp;on&nbsp;the&nbsp;device?<br>I&nbsp;won't&nbsp;focus&nbsp;on&nbsp;some&nbsp;of&nbsp;the&nbsp;other&nbsp;topics&nbsp;like&nbsp;IL2CPP&nbsp;stripping&nbsp;code&nbsp;from&nbsp;.NET&nbsp;libraries&nbsp;as&nbsp;I&nbsp;have&nbsp;covered&nbsp;that&nbsp;in&nbsp;a&nbsp;previous&nbsp;post&nbsp;[IL2CPP&nbsp;+&nbsp;HoloLens](http://peted.azurewebsites.net/il2cpp-hololens/),&nbsp;so&nbsp;you&nbsp;may&nbsp;want&nbsp;to&nbsp;be&nbsp;on&nbsp;the&nbsp;lookout&nbsp;for&nbsp;those&nbsp;kind&nbsp;of&nbsp;issues.&nbsp;I&nbsp;will&nbsp;leave&nbsp;you&nbsp;with&nbsp;a&nbsp;code&nbsp;repository&nbsp;that&nbsp;you&nbsp;can&nbsp;borrow&nbsp;code&nbsp;from&nbsp;to&nbsp;set&nbsp;up&nbsp;the&nbsp;particular&nbsp;scenario&nbsp;that&nbsp;you&nbsp;are&nbsp;interested&nbsp;in.&nbsp;The&nbsp;code&nbsp;and&nbsp;the&nbsp;rest&nbsp;of&nbsp;this&nbsp;post&nbsp;will&nbsp;be&nbsp;concerned&nbsp;with&nbsp;the&nbsp;different&nbsp;ways&nbsp;that&nbsp;access&nbsp;and&nbsp;id&nbsp;tokens&nbsp;can&nbsp;be&nbsp;retrieved,&nbsp;back-end&nbsp;configuration&nbsp;and&nbsp;an&nbsp;illustration&nbsp;of&nbsp;how&nbsp;you&nbsp;might&nbsp;get&nbsp;an&nbsp;AAD&nbsp;token&nbsp;for&nbsp;some&nbsp;of&nbsp;the&nbsp;new&nbsp;Mixed&nbsp;Reality&nbsp;services&nbsp;such&nbsp;as&nbsp;Azure&nbsp;Spatial&nbsp;Anchors&nbsp;and&nbsp;Azure&nbsp;Remote&nbsp;Rendering.<br>##&nbsp;Sample&nbsp;Walkthrough<br>&gt;&nbsp;This&nbsp;just&nbsp;describes&nbsp;some&nbsp;aspects&nbsp;of&nbsp;how&nbsp;I&nbsp;created&nbsp;the&nbsp;demo&nbsp;application.&nbsp;If&nbsp;this&nbsp;isn't&nbsp;of&nbsp;interest&nbsp;just&nbsp;skip&nbsp;these&nbsp;sections&nbsp;as&nbsp;I&nbsp;will&nbsp;make&nbsp;my&nbsp;way&nbsp;towards&nbsp;the&nbsp;various&nbsp;frameworks&nbsp;and&nbsp;APIs&nbsp;used.<br>For&nbsp;the&nbsp;sample&nbsp;I&nbsp;have&nbsp;used&nbsp;Unity&nbsp;2019.4.0f1.First&nbsp;add&nbsp;Nuget&nbsp;2.0.0&nbsp;to&nbsp;your&nbsp;project.Then,&nbsp;add&nbsp;MRTK&nbsp;v2.4.0&nbsp;to&nbsp;your&nbsp;project&nbsp;using&nbsp;nuget.&nbsp;It&nbsp;looks&nbsp;like&nbsp;nuget&nbsp;support&nbsp;has&nbsp;been&nbsp;dropped&nbsp;for&nbsp;MRTK&nbsp;v2.4.0&nbsp;so&nbsp;download&nbsp;the&nbsp;packages&nbsp;and&nbsp;import&nbsp;into&nbsp;your&nbsp;project.![build&nbsp;settings](./images/buildsettings.png)*build&nbsp;settings*Set&nbsp;app&nbsp;package&nbsp;name&nbsp;and&nbsp;capabilities&nbsp;to&nbsp;allow&nbsp;debugging&nbsp;on&nbsp;device&nbsp;via&nbsp;the&nbsp;unity&nbsp;debugging&nbsp;tools&nbsp;so&nbsp;we&nbsp;can&nbsp;connect&nbsp;using&nbsp;the&nbsp;managed&nbsp;debugger&gt;I&nbsp;have&nbsp;trained&nbsp;myself&nbsp;to&nbsp;set&nbsp;the&nbsp;package&nbsp;name&nbsp;to&nbsp;avoid&nbsp;clashes&nbsp;with&nbsp;other&nbsp;apps&nbsp;I&nbsp;am&nbsp;developing<br>![configure](./images/configure.png)*configure*<br>![configure&nbsp;XR&nbsp;plugin&nbsp;management](./images/xrplugin-management.png)*configure&nbsp;XR&nbsp;plugin&nbsp;management*<br>This&nbsp;also&nbsp;involves&nbsp;removing&nbsp;any&nbsp;legacy&nbsp;XR&nbsp;packages&nbsp;using&nbsp;the&nbsp;Unity&nbsp;package&nbsp;manager,&nbsp;if&nbsp;necessary..<br>add&nbsp;MRTK&nbsp;to&nbsp;the&nbsp;scene<br>![Add&nbsp;MRTK](./images/add-to-scene.png)*Add&nbsp;MRTK*<br>Turn&nbsp;off&nbsp;spatial&nbsp;awareness&nbsp;by&nbsp;cloning&nbsp;the&nbsp;MRTK&nbsp;configuration&nbsp;and&nbsp;turning&nbsp;Enable&nbsp;Spatial&nbsp;Awareness&nbsp;off.Add&nbsp;a&nbsp;near&nbsp;menu&nbsp;prefab&nbsp;to&nbsp;your&nbsp;scene,&nbsp;empty&nbsp;it's&nbsp;contents&nbsp;(you&nbsp;will&nbsp;need&nbsp;to&nbsp;unpack&nbsp;the&nbsp;prefab)&nbsp;and&nbsp;resize&nbsp;the&nbsp;remaining&nbsp;items&nbsp;so&nbsp;that&nbsp;the&nbsp;backplate&nbsp;is&nbsp;bigger,&nbsp;the&nbsp;visual&nbsp;cues&nbsp;are&nbsp;re-positioned&nbsp;and&nbsp;the&nbsp;pin&nbsp;is&nbsp;re-positioned.<br>![Empty&nbsp;NearMenu](./images/empty-near-menu.png)*Empty&nbsp;NearMenu*<br>Find&nbsp;the&nbsp;RadialSet&nbsp;prefab&nbsp;in&nbsp;the&nbsp;MRTK&nbsp;and&nbsp;drag&nbsp;an&nbsp;instance&nbsp;under&nbsp;the&nbsp;near&nbsp;menu&nbsp;game&nbsp;object,add&nbsp;a&nbsp;GridObjectCollection&nbsp;component&nbsp;to&nbsp;the&nbsp;RadialSet&nbsp;and&nbsp;add&nbsp;a&nbsp;toggle&nbsp;button&nbsp;for&nbsp;each&nbsp;option&nbsp;we&nbsp;want&nbsp;to&nbsp;represent&nbsp;(one&nbsp;for&nbsp;each&nbsp;login&nbsp;method).<br>Search&nbsp;the&nbsp;project&nbsp;panel&nbsp;for&nbsp;toggle&nbsp;to&nbsp;find&nbsp;the&nbsp;PressableButtonHoloLens2Toggle&nbsp;and&nbsp;drag&nbsp;one&nbsp;under&nbsp;the&nbsp;RadialSet.<br>Layout&nbsp;the&nbsp;toggle&nbsp;buttons<br>![Layout&nbsp;Toggle&nbsp;Buttons](./images/toggle-layout.png)*Layout&nbsp;Toggle&nbsp;Buttons*<br>Adjust&nbsp;the&nbsp;backplate&nbsp;and&nbsp;grip&nbsp;visuals&nbsp;to&nbsp;arrive&nbsp;at:<br>![Toggle](./images/toggles.png)*Toggle*<br>Rename&nbsp;and&nbsp;configure&nbsp;toggle&nbsp;buttons&nbsp;in&nbsp;the&nbsp;InteractableToggleCollection&nbsp;component&nbsp;on&nbsp;the&nbsp;RadialSet<br>![Interactable](./images/interactabletogglecollection.png)*Interactable*<br>Then&nbsp;we&nbsp;are&nbsp;going&nbsp;to&nbsp;make&nbsp;this&nbsp;into&nbsp;a&nbsp;tabbed&nbsp;dialog&nbsp;by&nbsp;adding&nbsp;a&nbsp;parent&nbsp;node&nbsp;to&nbsp;the&nbsp;RadialSet&nbsp;(I&nbsp;called&nbsp;this&nbsp;TabbedDialog)&nbsp;and&nbsp;then&nbsp;adding&nbsp;a&nbsp;script&nbsp;to&nbsp;that&nbsp;node.&nbsp;Here's&nbsp;a&nbsp;snippet&nbsp;from&nbsp;TabbedDialog.cs&nbsp;showing&nbsp;how&nbsp;the&nbsp;content&nbsp;visibility&nbsp;is&nbsp;synchronised&nbsp;with&nbsp;the&nbsp;tab&nbsp;selection.<br>```C#&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;OnSelectedChanged()&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Retrieve&nbsp;the&nbsp;current&nbsp;Index&nbsp;here...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;newId&nbsp;=&nbsp;SyncPanelToCurrentIndex();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!string.IsNullOrEmpty(newId))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SelectedChanged.Invoke(newId);&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;OnEnable()&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_selectionChanged&nbsp;==&nbsp;null)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_selectionChanged&nbsp;=&nbsp;OnSelectedChanged;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabs.OnSelectionEvents.AddListener(_selectionChanged);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SyncPanelToCurrentIndex();&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;SyncPanelToCurrentIndex()&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;idx&nbsp;=&nbsp;tabs.CurrentIndex;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(idx&nbsp;&lt;&nbsp;0&nbsp;&amp;&amp;&nbsp;idx&nbsp;&gt;=&nbsp;Panels.Length)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;string.Empty;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(var&nbsp;panel&nbsp;in&nbsp;Panels)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel.SetActive(false);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Panels[idx].SetActive(true);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Panels[idx].GetComponent&lt;<em>ProviderId</em>&gt;().Id;&nbsp;&nbsp;&nbsp;&nbsp;}```<br>The&nbsp;content&nbsp;pages&nbsp;are&nbsp;arbitrary&nbsp;game&nbsp;objects&nbsp;and&nbsp;are&nbsp;given&nbsp;an&nbsp;ID&nbsp;by&nbsp;adding&nbsp;the&nbsp;ProviderId&nbsp;script.&nbsp;This&nbsp;way&nbsp;the&nbsp;ID&nbsp;can&nbsp;be&nbsp;passed&nbsp;around&nbsp;to&nbsp;switch&nbsp;the&nbsp;content&nbsp;page&nbsp;and&nbsp;also&nbsp;the&nbsp;Identity&nbsp;provider.<br>![Content&nbsp;Pages](./images/content-pages.png)*Content&nbsp;Pages*<br>The&nbsp;video&nbsp;below&nbsp;shows&nbsp;the&nbsp;tabbed&nbsp;dialog&nbsp;being&nbsp;used&nbsp;to&nbsp;switch&nbsp;the&nbsp;content&nbsp;pages&nbsp;in&nbsp;the&nbsp;Unity&nbsp;Game&nbsp;preview.<br>[![Demo&nbsp;MRTK&nbsp;Video](https://img.youtube.com/vi/cOxb61Tk1hM/0.jpg)](https://www.youtube.com/watch?v=cOxb61Tk1hM)<br>We&nbsp;can&nbsp;use&nbsp;this&nbsp;UI&nbsp;to&nbsp;plug&nbsp;in&nbsp;different&nbsp;auth&nbsp;providers&nbsp;and&nbsp;switch&nbsp;them&nbsp;at&nbsp;runtime.<br>##&nbsp;APIs&nbsp;and&nbsp;Frameworks<br>###&nbsp;Web&nbsp;Authentication&nbsp;Manager<br>Here&nbsp;we&nbsp;can&nbsp;access&nbsp;the&nbsp;APIs&nbsp;which&nbsp;enable&nbsp;you&nbsp;to&nbsp;retrieve&nbsp;the&nbsp;current&nbsp;user's&nbsp;AAD&nbsp;token&nbsp;and&nbsp;also&nbsp;to&nbsp;invoke&nbsp;a&nbsp;biometric&nbsp;check&nbsp;against&nbsp;the&nbsp;current&nbsp;physical&nbsp;user.&nbsp;this&nbsp;would&nbsp;guard&nbsp;against&nbsp;another&nbsp;user&nbsp;picking&nbsp;up&nbsp;a&nbsp;device&nbsp;and&nbsp;accessing&nbsp;sensitive&nbsp;information.&nbsp;You&nbsp;can&nbsp;switch&nbsp;the&nbsp;iris&nbsp;check&nbsp;on/off&nbsp;in&nbsp;the&nbsp;sample&nbsp;with&nbsp;a&nbsp;toggle&nbsp;switch.<br>![Iris&nbsp;Login&nbsp;Toggle](./images/use-iris-login.png)<br>When&nbsp;this&nbsp;is&nbsp;selected&nbsp;and&nbsp;you&nbsp;sign&nbsp;in&nbsp;your&nbsp;iris&nbsp;will&nbsp;be&nbsp;re-scanned&nbsp;and&nbsp;you&nbsp;will&nbsp;see&nbsp;this&nbsp;dialog.<br>![Iris&nbsp;Check](./images/iris-check.png)<br>With&nbsp;the&nbsp;switch&nbsp;toggled&nbsp;to&nbsp;the&nbsp;'off'&nbsp;position&nbsp;you&nbsp;go&nbsp;through&nbsp;a&nbsp;flow&nbsp;that&nbsp;acquires&nbsp;the&nbsp;currently&nbsp;logged&nbsp;in&nbsp;user's&nbsp;AAD&nbsp;token&nbsp;so&nbsp;you&nbsp;won't&nbsp;get&nbsp;a&nbsp;prompt&nbsp;to&nbsp;login.&nbsp;This&nbsp;way&nbsp;you&nbsp;can&nbsp;share&nbsp;a&nbsp;HL2&nbsp;device&nbsp;amongst&nbsp;multiple&nbsp;people&nbsp;and&nbsp;ensure&nbsp;that&nbsp;if&nbsp;one&nbsp;user&nbsp;forgets&nbsp;to&nbsp;sign&nbsp;out&nbsp;they&nbsp;will&nbsp;not&nbsp;leak&nbsp;sensitive&nbsp;data.&nbsp;More&nbsp;information&nbsp;about&nbsp;setting&nbsp;up&nbsp;a&nbsp;device&nbsp;for&nbsp;multiple&nbsp;users&nbsp;can&nbsp;be&nbsp;found&nbsp;[here](https://docs.microsoft.com/en-us/hololens/hololens-multiple-users).<br>###&nbsp;Windows&nbsp;Account&nbsp;Provider<br>I&nbsp;have&nbsp;experimented&nbsp;here&nbsp;as&nbsp;I&nbsp;found&nbsp;a&nbsp;scenario&nbsp;where&nbsp;I&nbsp;wanted&nbsp;to&nbsp;switch&nbsp;between&nbsp;different&nbsp;known&nbsp;accounts&nbsp;but&nbsp;I&nbsp;couldn't&nbsp;get&nbsp;the&nbsp;account&nbsp;settings&nbsp;pane&nbsp;to&nbsp;show&nbsp;so&nbsp;haven't&nbsp;completed&nbsp;this&nbsp;part&nbsp;but&nbsp;may&nbsp;return&nbsp;to&nbsp;it&nbsp;later.<br>###&nbsp;Microsoft&nbsp;Authentication&nbsp;Library<br>Aside&nbsp;from&nbsp;the&nbsp;built-in&nbsp;APIs&nbsp;this&nbsp;would&nbsp;be&nbsp;the&nbsp;next&nbsp;favourite&nbsp;method&nbsp;of&nbsp;gaining&nbsp;an&nbsp;AAD&nbsp;token&nbsp;and&nbsp;that&nbsp;would&nbsp;be&nbsp;the&nbsp;suggestion&nbsp;of&nbsp;the&nbsp;Microsoft&nbsp;Identity&nbsp;team.&nbsp;Plus&nbsp;it&nbsp;supports&nbsp;device&nbsp;code&nbsp;flow&nbsp;which&nbsp;is&nbsp;sometimes&nbsp;handy&nbsp;depending&nbsp;on&nbsp;your&nbsp;scenario.&nbsp;Also&nbsp;it&nbsp;allows&nbsp;you&nbsp;to&nbsp;continue&nbsp;to&nbsp;develop&nbsp;your&nbsp;app&nbsp;against&nbsp;real&nbsp;APIs&nbsp;from&nbsp;the&nbsp;Unity&nbsp;editor.<br>###&nbsp;Active&nbsp;Directory&nbsp;Authentication&nbsp;Library<br>When&nbsp;we&nbsp;first&nbsp;try&nbsp;to&nbsp;use&nbsp;ADAL&nbsp;we&nbsp;get&nbsp;hit&nbsp;with&nbsp;the&nbsp;following&nbsp;error:<br>&gt;&nbsp;Error&nbsp;on&nbsp;deserializing&nbsp;read-only&nbsp;members&nbsp;in&nbsp;the&nbsp;class:&nbsp;No&nbsp;set&nbsp;method&nbsp;for&nbsp;property&nbsp;'TenantDiscoveryEndpoint'&nbsp;in&nbsp;type&nbsp;'Microsoft.IdentityModel.Clients.ActiveDirectory.InstanceDiscoveryResponse'.<br>This&nbsp;looks&nbsp;suspiciously&nbsp;like&nbsp;an&nbsp;IL2CPP&nbsp;code&nbsp;stripping&nbsp;issue.&nbsp;This&nbsp;occurs&nbsp;as&nbsp;byproduct&nbsp;of&nbsp;the&nbsp;optimisation&nbsp;used&nbsp;when&nbsp;the&nbsp;.NET&nbsp;binary&nbsp;is&nbsp;converted&nbsp;to&nbsp;C++.&nbsp;Unused&nbsp;code&nbsp;is&nbsp;stripped&nbsp;out&nbsp;in&nbsp;that&nbsp;process&nbsp;and&nbsp;sometimes&nbsp;code&nbsp;that&nbsp;isn't&nbsp;detected&nbsp;as&nbsp;reachable&nbsp;gets&nbsp;removed.&nbsp;Look&nbsp;out&nbsp;for&nbsp;code&nbsp;that&nbsp;is&nbsp;only&nbsp;referenced&nbsp;in&nbsp;a&nbsp;reflection&nbsp;scenario.&nbsp;See&nbsp;[here](http://peted.azurewebsites.net/il2cpp-hololens/)&nbsp;for&nbsp;further&nbsp;details.&nbsp;The&nbsp;short&nbsp;answer&nbsp;is&nbsp;to&nbsp;add&nbsp;a&nbsp;link.xml&nbsp;stating&nbsp;which&nbsp;types&nbsp;to&nbsp;not&nbsp;strip.<br>&gt;&nbsp;You&nbsp;can&nbsp;see&nbsp;the&nbsp;link.xml&nbsp;for&nbsp;the&nbsp;app&nbsp;[here](https://github.com/peted70/aad-hololens/blob/master/Assets/link.xml)<br>Although&nbsp;ADAL&nbsp;is&nbsp;not&nbsp;the&nbsp;recommended&nbsp;way&nbsp;forward&nbsp;for&nbsp;legacy&nbsp;and&nbsp;cross-platform&nbsp;reasons&nbsp;you&nbsp;may&nbsp;need&nbsp;to&nbsp;use&nbsp;it&nbsp;and&nbsp;so&nbsp;I&nbsp;have&nbsp;included&nbsp;it&nbsp;in&nbsp;my&nbsp;sample.<br>&gt;&nbsp;If&nbsp;you&nbsp;are&nbsp;using&nbsp;ADAL&nbsp;but&nbsp;would&nbsp;like&nbsp;to&nbsp;migrate&nbsp;to&nbsp;MSAL&nbsp;then&nbsp;the&nbsp;differences&nbsp;are&nbsp;distilled&nbsp;in&nbsp;[this](https://github.com/AzureAD/microsoft-authentication-library-for-dotnet/wiki/Adal-to-Msal)&nbsp;guide.<br>###&nbsp;Web&nbsp;Authentication&nbsp;Broker<br>[WebAuthenticationBroker](https://docs.microsoft.com/en-us/windows/uwp/security/web-authentication-broker)&nbsp;is&nbsp;a&nbsp;broker&nbsp;component&nbsp;that&nbsp;manages&nbsp;the&nbsp;http&nbsp;redirects&nbsp;retrieving&nbsp;the&nbsp;resulting&nbsp;AAD&nbsp;token&nbsp;that&nbsp;would&nbsp;usually&nbsp;be&nbsp;managed&nbsp;by&nbsp;a&nbsp;browser&nbsp;for&nbsp;a&nbsp;web&nbsp;application.&nbsp;As&nbsp;a&nbsp;result&nbsp;there&nbsp;is&nbsp;a&nbsp;bit&nbsp;more&nbsp;work&nbsp;to&nbsp;do&nbsp;to&nbsp;construct&nbsp;the&nbsp;original&nbsp;url&nbsp;than&nbsp;the&nbsp;other&nbsp;libraries.<br>##&nbsp;Settings<br>The&nbsp;settings&nbsp;for&nbsp;auth&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;json&nbsp;file&nbsp;in&nbsp;the&nbsp;Assets&nbsp;folder<br>![settings](./images/settings.png)<br>So&nbsp;edit&nbsp;this&nbsp;file&nbsp;with&nbsp;your&nbsp;own&nbsp;settings&nbsp;and&nbsp;rename&nbsp;it&nbsp;to&nbsp;app-settings.json&nbsp;and&nbsp;the&nbsp;sample&nbsp;code&nbsp;will&nbsp;pick&nbsp;it&nbsp;up.<br>##&nbsp;Configure&nbsp;the&nbsp;Backend<br>It&nbsp;is&nbsp;worth&nbsp;scanning&nbsp;the&nbsp;docs&nbsp;[here](https://docs.microsoft.com/en-us/hololens/hololens-identity)&nbsp;and&nbsp;although&nbsp;we&nbsp;can&nbsp;see&nbsp;from&nbsp;those&nbsp;docs&nbsp;that&nbsp;you&nbsp;can&nbsp;login&nbsp;to&nbsp;your&nbsp;HL2&nbsp;with&nbsp;a&nbsp;local&nbsp;account&nbsp;or&nbsp;an&nbsp;MSA&nbsp;things&nbsp;get&nbsp;more&nbsp;interesting&nbsp;when&nbsp;we&nbsp;consider&nbsp;Azure&nbsp;Active&nbsp;Directory&nbsp;because&nbsp;at&nbsp;the&nbsp;time&nbsp;of&nbsp;writing&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;have&nbsp;64&nbsp;AAD&nbsp;user&nbsp;accounts&nbsp;with&nbsp;the&nbsp;following&nbsp;options:<br>-&nbsp;Azure&nbsp;web&nbsp;credential&nbsp;provider-&nbsp;Azure&nbsp;Authenticator&nbsp;App-&nbsp;Biometric&nbsp;(Iris)&nbsp;–&nbsp;HoloLens&nbsp;2&nbsp;only-&nbsp;PIN&nbsp;–&nbsp;Optional&nbsp;for&nbsp;HoloLens&nbsp;(1st&nbsp;gen)required&nbsp;for&nbsp;HoloLens&nbsp;2-&nbsp;Password<br>Of&nbsp;most&nbsp;interest&nbsp;to&nbsp;me&nbsp;being&nbsp;iris&nbsp;login&nbsp;with&nbsp;multiple&nbsp;accounts.<br>&gt;&nbsp;Just&nbsp;getting&nbsp;an&nbsp;OAuth&nbsp;token&nbsp;and&nbsp;displaying&nbsp;it&nbsp;isn't&nbsp;too&nbsp;interesting&nbsp;as&nbsp;really&nbsp;the&nbsp;aim&nbsp;in&nbsp;a&nbsp;real&nbsp;app&nbsp;would&nbsp;most-likely&nbsp;be&nbsp;to&nbsp;access&nbsp;a&nbsp;custom&nbsp;API&nbsp;or&nbsp;some&nbsp;other&nbsp;Azure&nbsp;resource.&nbsp;So,&nbsp;to&nbsp;show&nbsp;that&nbsp;things&nbsp;are&nbsp;working&nbsp;as&nbsp;expected&nbsp;we'll&nbsp;take&nbsp;the&nbsp;AAD&nbsp;token&nbsp;and&nbsp;exchange&nbsp;it&nbsp;for&nbsp;and&nbsp;access&nbsp;token&nbsp;for&nbsp;Azure&nbsp;Mixed&nbsp;Reality&nbsp;services.&nbsp;We'll&nbsp;use&nbsp;that&nbsp;access&nbsp;token&nbsp;to&nbsp;make&nbsp;a&nbsp;call&nbsp;to&nbsp;the&nbsp;Azure&nbsp;Remote&nbsp;Rendering&nbsp;Service&nbsp;to&nbsp;enumerate&nbsp;rendering&nbsp;sessions&nbsp;just&nbsp;to&nbsp;check&nbsp;that&nbsp;the&nbsp;call&nbsp;succeeds.&nbsp;This&nbsp;access&nbsp;token&nbsp;could&nbsp;be&nbsp;used&nbsp;to&nbsp;access&nbsp;any&nbsp;MR&nbsp;services,&nbsp;e.g.&nbsp;Azure&nbsp;Spatial&nbsp;Anchors,&nbsp;that&nbsp;the&nbsp;logged&nbsp;in&nbsp;user&nbsp;has&nbsp;access&nbsp;to.&nbsp;We'll&nbsp;look&nbsp;into&nbsp;how&nbsp;to&nbsp;configure&nbsp;the&nbsp;application&nbsp;and&nbsp;also&nbsp;provide&nbsp;access&nbsp;to&nbsp;a&nbsp;particular&nbsp;user&nbsp;next.<br>###&nbsp;Test<br>I&nbsp;added&nbsp;a&nbsp;button&nbsp;to&nbsp;run&nbsp;the&nbsp;test&nbsp;which&nbsp;calls&nbsp;the&nbsp;ARR&nbsp;service&nbsp;and&nbsp;shows&nbsp;the&nbsp;results&nbsp;of&nbsp;whether&nbsp;the&nbsp;call&nbsp;succeeded&nbsp;or&nbsp;not.<br>&gt;&nbsp;After&nbsp;getting&nbsp;an&nbsp;AAD&nbsp;token&nbsp;you&nbsp;can&nbsp;press&nbsp;the&nbsp;button&nbsp;which&nbsp;will&nbsp;exchange&nbsp;the&nbsp;AAD&nbsp;token&nbsp;for&nbsp;an&nbsp;MR&nbsp;access&nbsp;token&nbsp;using&nbsp;the&nbsp;Mixed&nbsp;Reality&nbsp;Secure&nbsp;Token&nbsp;Service&nbsp;(STS).&nbsp;This&nbsp;access&nbsp;token&nbsp;will&nbsp;subsequently&nbsp;be&nbsp;in&nbsp;a&nbsp;call&nbsp;to&nbsp;the&nbsp;ARR&nbsp;service.&nbsp;The&nbsp;test&nbsp;UI&nbsp;will&nbsp;show&nbsp;green&nbsp;if&nbsp;the&nbsp;http&nbsp;status&nbsp;is&nbsp;successful&nbsp;and&nbsp;red&nbsp;otherwise.<br>###&nbsp;Register&nbsp;the&nbsp;App<br>I've&nbsp;covered&nbsp;this&nbsp;a&nbsp;few&nbsp;times&nbsp;on&nbsp;my&nbsp;blog&nbsp;so&nbsp;will&nbsp;just&nbsp;include&nbsp;the&nbsp;basic&nbsp;steps&nbsp;here:<br>In&nbsp;the&nbsp;[Azure&nbsp;portal](https://portal.azure.com)&nbsp;if&nbsp;you&nbsp;don't&nbsp;have&nbsp;an&nbsp;AAD&nbsp;set&nbsp;up&nbsp;there&nbsp;is&nbsp;a&nbsp;quickstart&nbsp;[here](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant)&nbsp;to&nbsp;help&nbsp;get&nbsp;you&nbsp;up&nbsp;and&nbsp;running.&nbsp;Once&nbsp;created&nbsp;you&nbsp;can&nbsp;register&nbsp;a&nbsp;new&nbsp;application:<br>![app&nbsp;reg](./images/app-reg.png)<br>Select&nbsp;'New&nbsp;Registration'&nbsp;and&nbsp;just&nbsp;name&nbsp;it&nbsp;without&nbsp;worrying&nbsp;about&nbsp;the&nbsp;other&nbsp;settings.&nbsp;You&nbsp;will&nbsp;be&nbsp;shown&nbsp;a&nbsp;page&nbsp;which&nbsp;has&nbsp;settings&nbsp;that&nbsp;you&nbsp;will&nbsp;need&nbsp;for&nbsp;the&nbsp;app-settings.json&nbsp;file&nbsp;we&nbsp;mentioned&nbsp;above&nbsp;(maybe&nbsp;fill&nbsp;those&nbsp;now).&nbsp;The&nbsp;other&nbsp;important&nbsp;thing&nbsp;is&nbsp;to&nbsp;register&nbsp;a&nbsp;redirect&nbsp;uri&nbsp;for&nbsp;your&nbsp;app.<br>###&nbsp;Redirect&nbsp;URI<br>The&nbsp;easiest&nbsp;way&nbsp;to&nbsp;discover&nbsp;the&nbsp;redirect&nbsp;URI&nbsp;for&nbsp;the&nbsp;sample&nbsp;app&nbsp;is&nbsp;to&nbsp;run&nbsp;it&nbsp;and&nbsp;the&nbsp;app&nbsp;will&nbsp;write&nbsp;the&nbsp;uri&nbsp;to&nbsp;th&nbsp;unity&nbsp;log.<br>&gt;&nbsp;Note,&nbsp;that&nbsp;the&nbsp;running&nbsp;instance&nbsp;of&nbsp;your&nbsp;app&nbsp;needs&nbsp;to&nbsp;be&nbsp;terminated&nbsp;before&nbsp;the&nbsp;log&nbsp;is&nbsp;flushed.&nbsp;You&nbsp;can&nbsp;terminate&nbsp;the&nbsp;app&nbsp;and&nbsp;download&nbsp;the&nbsp;unity&nbsp;log&nbsp;using&nbsp;the&nbsp;[HoloLens&nbsp;device&nbsp;portal](https://docs.microsoft.com/en-us/windows/mixed-reality/using-the-windows-device-portal).&gt;&gt;&nbsp;![Unity&nbsp;Log](./images/unity-log.png)<br>This&nbsp;code:<br>```C#string&nbsp;URI&nbsp;=&nbsp;string.Format("ms-appx-web://Microsoft.AAD.BrokerPlugIn/{0}",&nbsp;WebAuthenticationBroker.GetCurrentApplicationCallbackUri().Host.ToUpper());Logger.Log("Redirect&nbsp;URI:&nbsp;"&nbsp;+&nbsp;URI);```<br>will&nbsp;log&nbsp;out&nbsp;a&nbsp;redirect&nbsp;URI&nbsp;for&nbsp;a&nbsp;UWP&nbsp;app.<br>&gt;&nbsp;If&nbsp;I&nbsp;have&nbsp;this&nbsp;right&nbsp;the&nbsp;ADAL&nbsp;implementation&nbsp;required&nbsp;a&nbsp;slightly&nbsp;different&nbsp;format&nbsp;so&nbsp;I&nbsp;registered&nbsp;both:<br>```C#string&nbsp;URI&nbsp;=&nbsp;string.Format("ms-app://{0}",&nbsp;WebAuthenticationBroker.GetCurrentApplicationCallbackUri().Host.ToUpper());Logger.Log("Redirect&nbsp;URI:&nbsp;"&nbsp;+&nbsp;URI);```<br>To&nbsp;configure&nbsp;access&nbsp;for&nbsp;a&nbsp;user&nbsp;navigate&nbsp;to&nbsp;the&nbsp;Mixed&nbsp;Reality&nbsp;service&nbsp;you&nbsp;want&nbsp;to&nbsp;grant&nbsp;access&nbsp;to<br>![ARR](./images/arr-settings.png)<br>More&nbsp;info&nbsp;[here](https://docs.microsoft.com/en-us/azure/remote-rendering/how-tos/create-an-account)&nbsp;along&nbsp;with&nbsp;instructions&nbsp;on&nbsp;how&nbsp;to&nbsp;set&nbsp;up&nbsp;an&nbsp;Azure&nbsp;Remote&nbsp;Rendering&nbsp;account.&nbsp;I've&nbsp;set&nbsp;up&nbsp;my&nbsp;test&nbsp;user&nbsp;as&nbsp;an&nbsp;owner.<br>![ARR&nbsp;RBC](./images/arr-access.png)<br>Along&nbsp;with&nbsp;this&nbsp;I&nbsp;also&nbsp;need&nbsp;to&nbsp;give&nbsp;my&nbsp;app&nbsp;the&nbsp;necessary&nbsp;API&nbsp;permissions&nbsp;to&nbsp;access&nbsp;the&nbsp;Mixed&nbsp;Reality&nbsp;services.&nbsp;I&nbsp;can&nbsp;navigate&nbsp;to&nbsp;my&nbsp;app&nbsp;registration&nbsp;page&nbsp;on&nbsp;the&nbsp;Azure&nbsp;portal.<br>![API&nbsp;Permissions](./images/api-permissions.png)<br>and&nbsp;I&nbsp;can&nbsp;request&nbsp;a&nbsp;permission&nbsp;by&nbsp;searching&nbsp;for&nbsp;Microsoft&nbsp;Mixed...<br>![Request&nbsp;Permissions](./images/request-permission.png)<br>Selecting&nbsp;that&nbsp;and&nbsp;choosing&nbsp;'Delegated&nbsp;Permission'...<br>![Add&nbsp;Permissions](./images/add-permission.png)<br>and&nbsp;choose&nbsp;**mixedreality.signin**&nbsp;permission.<br>&gt;&nbsp;This&nbsp;will&nbsp;also&nbsp;be&nbsp;the&nbsp;scope&nbsp;that&nbsp;you&nbsp;will&nbsp;request&nbsp;for&nbsp;your&nbsp;AAD&nbsp;token.<br>And&nbsp;finally&nbsp;I&nbsp;granted&nbsp;access&nbsp;to&nbsp;my&nbsp;tenant:<br>![Grant&nbsp;Admin](./images/grant-admin.png)<br>##&nbsp;Diagnosing&nbsp;Token&nbsp;Issues<br>If&nbsp;at&nbsp;some&nbsp;point&nbsp;you&nbsp;get&nbsp;stuck&nbsp;on&nbsp;some&nbsp;AAD&nbsp;error&nbsp;then&nbsp;having&nbsp;an&nbsp;understanding&nbsp;of&nbsp;the&nbsp;OAuth&nbsp;flow&nbsp;that&nbsp;you&nbsp;are&nbsp;using&nbsp;is&nbsp;vital&nbsp;and&nbsp;you&nbsp;can&nbsp;also&nbsp;use&nbsp;[https://jwt.ms/](https://jwt.ms/)&nbsp;to&nbsp;paste&nbsp;in&nbsp;a&nbsp;token&nbsp;and&nbsp;have&nbsp;a&nbsp;look&nbsp;at&nbsp;it's&nbsp;contents/claims&nbsp;to&nbsp;ensure&nbsp;they&nbsp;match&nbsp;with&nbsp;what&nbsp;you&nbsp;are&nbsp;expecting.<br>![JWT](./images/jwt.png)</p>
<!-- /wp:paragraph -->
