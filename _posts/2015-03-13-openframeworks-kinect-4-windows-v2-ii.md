---
layout: single
title: OPENFRAMEWORKS + KINECT 4 WINDOWS V2 (II)
date: 2015-03-13 16:58
author: peted70
comments: true
categories: [Kinect, kinect, openframeworks, openframeworks]
---
<p><a href="http://peted.azurewebsites.net/wp-content/uploads/2015/03/ofprojgen.png"><img title="ofprojgen" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="ofprojgen" src="http://peted.azurewebsites.net/wp-content/uploads/2015/03/ofprojgen_thumb.png" width="738" height="475"></a> </p> <p>In my previous <a href="http://peted.azurewebsites.net/openframeworks-kinect-4-windows-v2/" target="_blank">post</a> I showed how to get an environment set up with <a href="http://www.openframeworks.cc/" target="_blank">Openframeworks</a> and Kinect V2.0 for Windows Store. I’d like to elaborate on that a little and run through a demo app I recently created. Since these posts are based on the <a href="https://msopentech.com/blog/2014/07/03/openframeworks-developers-can-now-create-universal-apps-for-windows/" target="_blank">MSOpenTech</a> fork of Ofx which works with Windows Store we are restricted to using OpenGL ES as this is what is currently supported by <a href="https://code.google.com/p/angleproject/" target="_blank">Project Angle</a>. What this means in practice is that if you find an oFx addon that you want to use you need to make sure that it doesn’t call methods unsupported by OpenGL ES. This includes things like glBegin..glEnd immediate mode rendering syntax – this is replaced with vertex buffer rendering. If an addon has used this style then it can’t be used with Windows Store currently. Another option here would be to create an oFx desktop app with Kinect integration – more on that in a subsequent post…</p> <p>Anyway, whilst leafing through the interesting addons I could use I found <a href="http://box2d.org/" target="_blank">Box2D</a> which is a 2d physics engine which I thought might work well in a demo.</p> <p>In the build of the oFx project generator that I am using (from the universal branch here <a title="https://github.com/MSOpenTech/openFrameworks" href="https://github.com/MSOpenTech/openFrameworks">https://github.com/MSOpenTech/openFrameworks</a>) the addons feature doesn’t seem to work. To work around this I used a different fork of oFx from here <a title="https://github.com/liquidzym/openFrameworks/tree/VS2013" href="https://github.com/liquidzym/openFrameworks/tree/VS2013">https://github.com/liquidzym/openFrameworks/tree/VS2013</a> which has support for Visual Studio 2013 and I added the addon and then I copied the entries from the Visual Studio project files across into my Windows Store projects.</p> <p>Using that method I got Box2D into my app. From there I could define a Box2D world with physical properties and boundaries and I could introduce rigid bodies into the world. I chose to populate the world with differently-coloured circles, I set the boundaries to be the edges of the app and I used the Kinect body data to make my hands attraction points for the circles. </p> <p><a href="http://peted.azurewebsites.net/wp-content/uploads/2015/03/ofxcircles.png"><img title="ofxcircles" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="ofxcircles" src="http://peted.azurewebsites.net/wp-content/uploads/2015/03/ofxcircles_thumb.png" width="729" height="714"></a> </p> <p>Here’s the code to set up the world:</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:44a2bf98-6c94-44c1-aaac-fe4bfba4e66e" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">init</span><span style="background:#1e1e1e;color:#b4b4b4">();</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">ofGetWidth</span><span style="background:#1e1e1e;color:#b4b4b4">();</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">ofGetHeight</span><span style="background:#1e1e1e;color:#b4b4b4">();</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">createBounds</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">setGravity</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">1.0f</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">createGround</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">-</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">300.0f</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">-</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">300.0f</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> </ol> </div> </div> </div> <p>And then for setting up a boundary at each side of the screen:</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:95121713-fcd4-4599-bacb-81e7919ebc10" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#4ec9b0">b2BodyDef</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">bd</span><span style="background:#1e1e1e;color:#b4b4b4">;</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">wallleft</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">world</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">CreateBody</span><span style="background:#1e1e1e;color:#b4b4b4">(&amp;</span><span style="background:#1e1e1e;color:#c8c8c8">bd</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">b2EdgeShape</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">shape</span><span style="background:#1e1e1e;color:#b4b4b4">;</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">shape</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">Set</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">b2Vec2</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">b2Vec2</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">10.0f</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">));</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">wallleft</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">CreateFixture</span><span style="background:#1e1e1e;color:#b4b4b4">(&amp;</span><span style="background:#1e1e1e;color:#c8c8c8">shape</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>&nbsp;</li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">b2BodyDef</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">bd2</span><span style="background:#1e1e1e;color:#b4b4b4">;</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">wallRight</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">world</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">CreateBody</span><span style="background:#1e1e1e;color:#b4b4b4">(&amp;</span><span style="background:#1e1e1e;color:#c8c8c8">bd2</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">&nbsp;</li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">b2EdgeShape</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">shape2</span><span style="background:#1e1e1e;color:#b4b4b4">;</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">shape2</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">Set</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">b2Vec2</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">b2Vec2</span><span style="background:#1e1e1e;color:#b4b4b4">((</span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">-</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">10.0f</span><span style="background:#1e1e1e;color:#b4b4b4">)</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">/</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#bd63c5">OFX_BOX2D_SCALE</span><span style="background:#1e1e1e;color:#b4b4b4">));</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#c8c8c8">wallRight</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">CreateFixture</span><span style="background:#1e1e1e;color:#b4b4b4">(&amp;</span><span style="background:#1e1e1e;color:#c8c8c8">shape2</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> </ol> </div> </div> </div> <p>I made a function to create the circles:</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:79e6b229-ff3b-4343-860c-56e155c63d60" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ofApp</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#c8c8c8">createCircle</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">x</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">y</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">ofRandom</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">10</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">60</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">ofColor</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">col</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">ofRandom</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">255</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">ofRandom</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">255</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">ofRandom</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">255</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">150</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_circles</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">push_back</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">ofPtr</span><span style="background:#1e1e1e;color:#b4b4b4">&lt;</span><span style="background:#1e1e1e;color:#4ec9b0">ofxBox2dCircle</span><span style="background:#1e1e1e;color:#b4b4b4">&gt;(</span><span style="background:#1e1e1e;color:#569cd6">new</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">CustomParticle</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">col</span><span style="background:#1e1e1e;color:#b4b4b4">)));</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_circles</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">back</span><span style="background:#1e1e1e;color:#b4b4b4">().</span><span style="background:#1e1e1e;color:#c8c8c8">get</span><span style="background:#1e1e1e;color:#b4b4b4">()-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">setPhysics</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#b5cea8">3.0</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.83</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.1</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_circles</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">back</span><span style="background:#1e1e1e;color:#b4b4b4">().</span><span style="background:#1e1e1e;color:#c8c8c8">get</span><span style="background:#1e1e1e;color:#b4b4b4">()-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">setup</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#dadada">_box2dWorld</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">getWorld</span><span style="background:#1e1e1e;color:#b4b4b4">(),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">x</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#7f7f7f">y</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">w</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> </ol> </div> </div> </div> <p>And set up attraction points at the location of the hands:</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:836dd32d-2a10-4602-92fa-3d8f0679bf32" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#dadada">_bodiesUpdated</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">for</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">body</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">:</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#dadada">_bodies</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">body</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">IsTracked</span><span style="background:#1e1e1e;color:#b4b4b4">)</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">hl</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">body</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Joints</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Lookup</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">JointType</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#b8d7a3">HandLeft</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">csp1</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#dadada">_coordinateMapper</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">MapCameraPointToColorSpace</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">hl</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">Position</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">h2</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">body</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Joints</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">Lookup</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">JointType</span><span style="background:#1e1e1e;color:#b4b4b4">::</span><span style="background:#1e1e1e;color:#b8d7a3">HandRight</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">auto</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">csp2</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#dadada">_coordinateMapper</span><span style="background:#1e1e1e;color:#b4b4b4">-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">MapCameraPointToColorSpace</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">hl</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">Position</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">for</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#569cd6">int</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">i</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#b4b4b4">;</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">i</span><span style="background:#1e1e1e;color:#b4b4b4">&lt;</span><span style="background:#1e1e1e;color:#dadada">_circles</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#c8c8c8">size</span><span style="background:#1e1e1e;color:#b4b4b4">();</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">i</span><span style="background:#1e1e1e;color:#b4b4b4">++)</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>                <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_circles</span><span style="background:#1e1e1e;color:#b4b4b4">[</span><span style="background:#1e1e1e;color:#c8c8c8">i</span><span style="background:#1e1e1e;color:#b4b4b4">].</span><span style="background:#1e1e1e;color:#c8c8c8">get</span><span style="background:#1e1e1e;color:#b4b4b4">()-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">addAttractionPoint</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">ofVec2f</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">csp1</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">X</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">csp1</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">Y</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">3.0f</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#dadada">_circles</span><span style="background:#1e1e1e;color:#b4b4b4">[</span><span style="background:#1e1e1e;color:#c8c8c8">i</span><span style="background:#1e1e1e;color:#b4b4b4">].</span><span style="background:#1e1e1e;color:#c8c8c8">get</span><span style="background:#1e1e1e;color:#b4b4b4">()-&gt;</span><span style="background:#1e1e1e;color:#c8c8c8">addAttractionPoint</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#4ec9b0">ofVec2f</span><span style="background:#1e1e1e;color:#b4b4b4">(</span><span style="background:#1e1e1e;color:#c8c8c8">csp2</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">X</span><span style="background:#1e1e1e;color:#b4b4b4">,</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#c8c8c8">csp2</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dadada">Y</span><span style="background:#1e1e1e;color:#b4b4b4">),</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">3.0f</span><span style="background:#1e1e1e;color:#b4b4b4">);</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> </ol> </div> </div> </div> <blockquote> <p>Note the use of the Kinect SDK’s coordinate mapper to map the hand locations from absolute 3d positions to 2d points in my physics world.</p></blockquote> <p>It is mildly amusing to make the circles chase you as you swing your hands around but not difficult to let your imagination run riot thinking about the possibilities here. My demo was put together with a few lines of code – that’s the power of OpenFrameworks and other similar frameworks – they include a host of creative elements without the need to reinvent everything.</p> <p>The source for this is on Github - <a title="https://github.com/peted70/kinect-ofx-box2d-circles" href="https://github.com/peted70/kinect-ofx-box2d-circles">https://github.com/peted70/kinect-ofx-box2d-circles</a></p>
