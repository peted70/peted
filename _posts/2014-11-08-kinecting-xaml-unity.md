---
layout: single
title: Kinecting XAML + Unity
date: 2014-11-08 18:35
author_profile: true
comments: true
categories: [Kinect, Unity]
header:
    teaserlogo: 'assets/images/'
    teaser: 'assets/images/'
---
<p><a href="{{ site.baseurl }}/assets/images/2014/11/earthblog.png"><img title="earthblog" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" border="0" alt="earthblog" src="{{ site.baseurl }}/assets/images/2014/11/earthblog_thumb.png" width="898" height="518"></a> </p> <p>Following on from my previous post where I showed how easy it is to interact with Kinect data inside the unity 3D environment I wondered how I might manipulate 3D game objects using Kinect gestures within a Windows store app. (Before I begin I would like to point out that the Kinect integration is only available with Unity Pro version). Also, if you want to follow along you will need to get the <a href="http://go.microsoft.com/fwlink/?LinkID=513177">Kinect Unity packages</a> and also the <a href=" https://visualstudiogallery.msdn.microsoft.com/20b80b8c-659b-45ef-96c1-437828fe7cf2.">Unity Visual Studio Tools</a>. These packages can be added from the Unity Project wizard or can be later added using the <strong>Assets &gt; Import Package</strong> menu.</p> <p>I wanted to start by leveraging the built-in gestures that the Kinect SDK uses in its <strong>Controls Basics</strong> samples. There are samples in the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=44561">Kinect v2 SDK</a> for each of WPF, XAML and DX; the gesture support has been integrated into the ui frameworks for WPF and XAML but the Direct X sample is more low-level and shows how to use gesture recognizers directly.</p> <p>I decided to leverage the Unity to XAML communication which is outlined in the Unity sample here <a title="http://docs.unity3d.com/Manual/windowsstore-examples.html" href="http://docs.unity3d.com/Manual/windowsstore-examples.html">http://docs.unity3d.com/Manual/windowsstore-examples.html</a> and use the higher level gesture support in XAML. In case you were wondering when you create a Windows store app for Unity it is created as either a c# XAML + Direct X app or a c++ XAML Direct X app. What this means is a standard XAML app which has a <a href="http://msdn.microsoft.com/en-us/library/windows.ui.xaml.controls.swapchainpanel.aspx">SwapChainPanel</a> which hosts the Unity content. The SwapChainPanel is a control which can sit anywhere in a the visual tree and can render Direct X graphics. </p> <p>&nbsp;</p> <h3>Setting the Scene</h3> <p>I started by looking through the Unity Assets store for a suitable 3D model and while browsing through the catalogue I found this free 3D earth model:</p> <p><a href="{{ site.baseurl }}/assets/images/2014/11/earthmodel.png"><img title="earth model" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" border="0" alt="earth model" src="{{ site.baseurl }}/assets/images/2014/11/earthmodel_thumb.png" width="709" height="376"></a> </p> <p>So, I imported this and added it to my scene in Unity. Now, I’m a beginner with Unity so at this point I wanted to get a better feel for how to interact with GameObjects in a scene, how this all translates back down to a Windows Store and Windows Phone app and also how to debug using Visual Studio.</p> <h3>Mouse/Camera</h3> <p>I thought that a basic scenario would be adding the ability to orbit the camera around the 3D model and then later I could think about how to achieve this using kinect gestures. To that end I added the standard Unity MouseOrbit script to the MainCamera in my scene and selected my earth model as the ‘look-at’ target. So, so far I’ve just pressed on a few buttons and I have a camera orbiting a 3D earth; let’s see if it runs as a Windows Store app.</p> <h3>Windows Store</h3> <p>To run/debug a windows store app from this Unity scene you can select File &gt; Build Settings and you will see the dialog below:</p> <p><a href="{{ site.baseurl }}/assets/images/2014/11/unitybuildsettings.png"><img title="unitybuildsettings" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" border="0" alt="unitybuildsettings" src="{{ site.baseurl }}/assets/images/2014/11/unitybuildsettings_thumb.png" width="578" height="643"></a> </p> <p></p> <p>I set some of the settings, added the scene here and chose ‘Build’. I chose a folder to store the project files and Unity created me a VS solution with my store app code. I opened this up in VS and one thing you will need to do before running the app is to choose a processor architecture as ‘Any CPU’ is not sufficient. I usually choose x86 while developing as the VS designer won’t work with x64. So with that selected you can hit F5 and the app will run. So at this stage I had an earth which I could orbit around with the camera. I also tweaked the mouse orbit script a little to provide a zoom in/out as I would want this functionality later when I use Kinect.</p> <h3>From Mouse to Kinect</h3> <p>So for the XAML side of things what I needed was a way to recognise gestures and pass that information through to the Unity Scene. The way to detect built-in gestures using XAML is to add a KinectRegion to the visual tree which will detect <a href="http://msdn.microsoft.com/en-us/library/microsoft.kinect.xaml.controls.ikinectcontrol.aspx">IKinectControl</a> derived controls within it and along with a little more plumbing you can code a class which receives manipulation events corresponding to gestures. Here are the steps and the basic code I used to get to this stage:</p> <p>Create an <a href="http://msdn.microsoft.com/en-us/library/microsoft.kinect.xaml.controls.ikinectcontrol.aspx">IKinectControl</a>-derived Usercontrol that I could use inside a KinectRegion which would cover the whole screen.</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:ebf6fa6e-0bbc-4842-8ca4-2552cfa2e3f2" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2.5em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">sealed</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">partial</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">class</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">UnityGestureProxyControl</span><span style="background:#1e1e1e;color:#dcdcdc"> : </span><span style="background:#1e1e1e;color:#4ec9b0">UserControl</span><span style="background:#1e1e1e;color:#dcdcdc">, </span><span style="background:#1e1e1e;color:#b8d7a3">IKinectControl</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> UnityGestureProxyControl()</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">this</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">InitializeComponent();</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b8d7a3">IKinectController</span><span style="background:#1e1e1e;color:#dcdcdc"> CreateController(</span><span style="background:#1e1e1e;color:#b8d7a3">IInputModel</span><span style="background:#1e1e1e;color:#dcdcdc"> inputModel, </span><span style="background:#1e1e1e;color:#4ec9b0">KinectRegion</span><span style="background:#1e1e1e;color:#dcdcdc"> kinectRegion)</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">inputModel</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">GestureRecognizer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">GestureSettings </span><span style="background:#1e1e1e;color:#b4b4b4">|=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">WindowsPreview</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Kinect</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Input</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#b8d7a3">KinectGestureSettings</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationScale </span><span style="background:#1e1e1e;color:#b4b4b4">|</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc">WindowsPreview</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Kinect</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Input</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#b8d7a3">KinectGestureSettings</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">KinectHold;</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">return</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">new</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">OrbitController</span><span style="background:#1e1e1e;color:#dcdcdc">((</span><span style="background:#1e1e1e;color:#4ec9b0">ManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc">)model, </span><span style="background:#1e1e1e;color:#569cd6">this</span><span style="background:#1e1e1e;color:#dcdcdc">, kinectRegion);</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">bool</span><span style="background:#1e1e1e;color:#dcdcdc"> IsManipulatable</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">get</span><span style="background:#1e1e1e;color:#dcdcdc"> { </span><span style="background:#1e1e1e;color:#569cd6">return</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">true</span><span style="background:#1e1e1e;color:#dcdcdc">; }</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">bool</span><span style="background:#1e1e1e;color:#dcdcdc"> IsPressable</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">get</span><span style="background:#1e1e1e;color:#dcdcdc"> { </span><span style="background:#1e1e1e;color:#569cd6">return</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">false</span><span style="background:#1e1e1e;color:#dcdcdc">; }</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> </ol> </div> </div> </div> <p>The <a href="http://msdn.microsoft.com/en-us/library/microsoft.kinect.xaml.controls.ikinectcontrol.aspx">IKinectControl</a> interface has two properties allowing querying the type of control ‘manipulatable’ or ‘pressable’ or both and CreateController which returns an object implementing <a href="http://msdn.microsoft.com/en-us/library/microsoft.kinect.xaml.controls.ikinectcontroller.aspx">IKinectController</a>. I created a custom class implementing the required interfaces and used it to hook up the input model to the manipulation events received in response to the gesture recognition.</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:9c9364db-e4cb-4ecf-b311-f094c198f319" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 3em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">class</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">OrbitController</span><span style="background:#1e1e1e;color:#dcdcdc"> : </span><span style="background:#1e1e1e;color:#b8d7a3">IKinectManipulatableController</span><span style="background:#1e1e1e;color:#dcdcdc">, </span><span style="background:#1e1e1e;color:#b8d7a3">IDisposable</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">private</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">ManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc"> _model;</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">private</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">UnityGestureProxyControl</span><span style="background:#1e1e1e;color:#dcdcdc"> _unityGestureProxyControl;</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> distance </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">50.0f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">GameObject</span><span style="background:#1e1e1e;color:#dcdcdc"> _earth;</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">bool</span><span style="background:#1e1e1e;color:#dcdcdc"> _manipulating;</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">KinectRegion</span><span style="background:#1e1e1e;color:#dcdcdc"> _region;</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> OrbitController(</span><span style="background:#1e1e1e;color:#4ec9b0">ManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc"> model, </span><span style="background:#1e1e1e;color:#4ec9b0">UnityGestureProxyControl</span><span style="background:#1e1e1e;color:#dcdcdc"> unityGestureProxyControl, </span><span style="background:#1e1e1e;color:#4ec9b0">KinectRegion</span><span style="background:#1e1e1e;color:#dcdcdc"> region)</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">_region </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> region;</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">_model </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> model;</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">_unityGestureProxyControl </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> unityGestureProxyControl;</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> (UnityPlayer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">AppCallbacks</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Instance</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">IsInitialized())</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">Initialise();</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">else</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">UnityPlayer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">AppCallbacks</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Instance</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Initialized </span><span style="background:#1e1e1e;color:#b4b4b4">+=</span><span style="background:#1e1e1e;color:#dcdcdc"> () </span><span style="background:#1e1e1e;color:#b4b4b4">=&gt;</span><span style="background:#1e1e1e;color:#dcdcdc"> { Initialise(); };</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> Initialise()</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">UnityPlayer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">AppCallbacks</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Instance</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">InvokeOnAppThread(</span><span style="background:#1e1e1e;color:#569cd6">new</span><span style="background:#1e1e1e;color:#dcdcdc"> UnityPlayer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">AppCallbackItem</span><span style="background:#1e1e1e;color:#dcdcdc">(() </span><span style="background:#1e1e1e;color:#b4b4b4">=&gt;</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">_earth </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">GameObject</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Find(</span><span style="background:#1e1e1e;color:#d69d85">&quot;Earth16128Tris&quot;</span><span style="background:#1e1e1e;color:#dcdcdc">);</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc">_unityGestureProxyControl</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Dispatcher</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">RunAsync(Windows</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">UI</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Core</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#b8d7a3">CoreDispatcherPriority</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Normal,</span></li> <li>                <span style="background:#1e1e1e;color:#dcdcdc">() </span><span style="background:#1e1e1e;color:#b4b4b4">=&gt;</span></li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>                    <span style="background:#1e1e1e;color:#dcdcdc">_model</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationStarted </span><span style="background:#1e1e1e;color:#b4b4b4">+=</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationStarted;</span></li> <li class="le-pavsc-even">                    <span style="background:#1e1e1e;color:#dcdcdc">_model</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationUpdated </span><span style="background:#1e1e1e;color:#b4b4b4">+=</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationUpdated;</span></li> <li>                    <span style="background:#1e1e1e;color:#dcdcdc">_model</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationCompleted </span><span style="background:#1e1e1e;color:#b4b4b4">+=</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationCompleted;</span></li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc">});</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">), </span><span style="background:#1e1e1e;color:#569cd6">false</span><span style="background:#1e1e1e;color:#dcdcdc">);</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationStarted(</span><span style="background:#1e1e1e;color:#b8d7a3">IManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc"> sender, WindowsPreview</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Kinect</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Input</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">KinectManipulationStartedEventArgs</span><span style="background:#1e1e1e;color:#dcdcdc"> args)</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">_manipulating </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">true</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> x </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> y </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> xSpeed </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">1.0f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> ySpeed </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">1.0f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc"> scale </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">1.0f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationUpdated(</span><span style="background:#1e1e1e;color:#b8d7a3">IManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc"> sender, WindowsPreview</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Kinect</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Input</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">KinectManipulationUpdatedEventArgs</span><span style="background:#1e1e1e;color:#dcdcdc"> args)</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">if</span><span style="background:#1e1e1e;color:#dcdcdc"> (_manipulating </span><span style="background:#1e1e1e;color:#b4b4b4">==</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">true</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b4b4b4">&amp;&amp;</span><span style="background:#1e1e1e;color:#dcdcdc"> _earth </span><span style="background:#1e1e1e;color:#b4b4b4">!=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">null</span><span style="background:#1e1e1e;color:#dcdcdc">)</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">distance </span><span style="background:#1e1e1e;color:#b4b4b4">*=</span><span style="background:#1e1e1e;color:#dcdcdc"> args</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Delta</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Scale;</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">var</span><span style="background:#1e1e1e;color:#dcdcdc"> windowPoint </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">InputPointerManager</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">TransformInputPointerCoordinatesToWindowCoordinates(args</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Delta</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Translation, _region</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Bounds);</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc">x </span><span style="background:#1e1e1e;color:#b4b4b4">+=</span><span style="background:#1e1e1e;color:#dcdcdc"> (</span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc">)windowPoint</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">X </span><span style="background:#1e1e1e;color:#b4b4b4">*</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.2f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">y </span><span style="background:#1e1e1e;color:#b4b4b4">+=</span><span style="background:#1e1e1e;color:#dcdcdc"> (</span><span style="background:#1e1e1e;color:#569cd6">float</span><span style="background:#1e1e1e;color:#dcdcdc">)windowPoint</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Y </span><span style="background:#1e1e1e;color:#b4b4b4">*</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#b5cea8">0.2f</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">y </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">MainPage</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ClampAngle(y, </span><span style="background:#1e1e1e;color:#b4b4b4">-</span><span style="background:#1e1e1e;color:#b5cea8">20.0f</span><span style="background:#1e1e1e;color:#dcdcdc">, </span><span style="background:#1e1e1e;color:#b5cea8">80.0f</span><span style="background:#1e1e1e;color:#dcdcdc">);</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">Quaternion</span><span style="background:#1e1e1e;color:#dcdcdc"> rotation </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">Quaternion</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Euler(y, x, </span><span style="background:#1e1e1e;color:#b5cea8">0</span><span style="background:#1e1e1e;color:#dcdcdc">);</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">Vector3</span><span style="background:#1e1e1e;color:#dcdcdc"> negDistance </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">new</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">Vector3</span><span style="background:#1e1e1e;color:#dcdcdc">(</span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc">, </span><span style="background:#1e1e1e;color:#b5cea8">0.0f</span><span style="background:#1e1e1e;color:#dcdcdc">, </span><span style="background:#1e1e1e;color:#b4b4b4">-</span><span style="background:#1e1e1e;color:#dcdcdc">distance);</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">Vector3</span><span style="background:#1e1e1e;color:#dcdcdc"> position </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> rotation </span><span style="background:#1e1e1e;color:#b4b4b4">*</span><span style="background:#1e1e1e;color:#dcdcdc"> negDistance </span><span style="background:#1e1e1e;color:#b4b4b4">+</span><span style="background:#1e1e1e;color:#dcdcdc"> _earth</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">transform</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">position;</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc">UnityPlayer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">AppCallbacks</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Instance</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">InvokeOnAppThread(</span><span style="background:#1e1e1e;color:#569cd6">new</span><span style="background:#1e1e1e;color:#dcdcdc"> UnityPlayer</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">AppCallbackItem</span><span style="background:#1e1e1e;color:#dcdcdc">(() </span><span style="background:#1e1e1e;color:#b4b4b4">=&gt;</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">                <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">Camera</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">current</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">transform</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">rotation </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> rotation;</span></li> <li>                <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#4ec9b0">Camera</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">current</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">transform</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">position </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> position;</span></li> <li class="le-pavsc-even">            <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>            <span style="background:#1e1e1e;color:#dcdcdc">), </span><span style="background:#1e1e1e;color:#569cd6">false</span><span style="background:#1e1e1e;color:#dcdcdc">);</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationCompleted(</span><span style="background:#1e1e1e;color:#b8d7a3">IManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc"> sender, WindowsPreview</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Kinect</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Input</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">KinectManipulationCompletedEventArgs</span><span style="background:#1e1e1e;color:#dcdcdc"> args)</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">_manipulating </span><span style="background:#1e1e1e;color:#b4b4b4">=</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">false</span><span style="background:#1e1e1e;color:#dcdcdc">;</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> Microsoft</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Kinect</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Toolkit</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">Input</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#4ec9b0">ManipulatableModel</span><span style="background:#1e1e1e;color:#dcdcdc"> ManipulatableInputModel</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">get</span><span style="background:#1e1e1e;color:#dcdcdc"> { </span><span style="background:#1e1e1e;color:#569cd6">return</span><span style="background:#1e1e1e;color:#dcdcdc"> _model; }</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li>&nbsp;</li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#4ec9b0">FrameworkElement</span><span style="background:#1e1e1e;color:#dcdcdc"> Element</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">get</span><span style="background:#1e1e1e;color:#dcdcdc"> { </span><span style="background:#1e1e1e;color:#569cd6">return</span><span style="background:#1e1e1e;color:#dcdcdc"> _unityGestureProxyControl; }</span></li> <li>    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li class="le-pavsc-even">&nbsp;</li> <li>    <span style="background:#1e1e1e;color:#dcdcdc"></span><span style="background:#1e1e1e;color:#569cd6">public</span><span style="background:#1e1e1e;color:#dcdcdc"> </span><span style="background:#1e1e1e;color:#569cd6">void</span><span style="background:#1e1e1e;color:#dcdcdc"> Dispose()</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">{</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">_model</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationStarted </span><span style="background:#1e1e1e;color:#b4b4b4">-=</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationStarted;</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#dcdcdc">_model</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationUpdated </span><span style="background:#1e1e1e;color:#b4b4b4">-=</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationUpdated;</span></li> <li>        <span style="background:#1e1e1e;color:#dcdcdc">_model</span><span style="background:#1e1e1e;color:#b4b4b4">.</span><span style="background:#1e1e1e;color:#dcdcdc">ManipulationCompleted </span><span style="background:#1e1e1e;color:#b4b4b4">-=</span><span style="background:#1e1e1e;color:#dcdcdc"> _model_ManipulationCompleted;</span></li> <li class="le-pavsc-even">    <span style="background:#1e1e1e;color:#dcdcdc">}</span></li> <li><span style="background:#1e1e1e;color:#dcdcdc">}</span></li> </ol> </div> </div> </div> <p>This class illustrates hooking up the manipulation events and marshaling them over to the Unity environment. I wasn’t happy with the resulting camera orbiting behaviour as I suspect I have made some wrong assumptions when porting the math from the original mouseOrbit script so I may re-visit this in future. Finally, this xaml needs to be positioned within the mainPage.xaml:</p> <div id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:e6ff6297-bd7f-4fe3-b24e-9751fc2a07ff" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"> <div class="le-pavsc-container"> <div style="background: #ddd; overflow: auto"> <ol start="1" style="background: #000000; margin: 0 0 0 2em; padding: 0 0 0 5px;"> <li><span style="background:#1e1e1e;color:#ababab"></span><span style="background:#1e1e1e;color:#808080">&lt;</span><span style="background:#1e1e1e;color:#e6e6e6">k</span><span style="background:#1e1e1e;color:#808080">:</span><span style="background:#1e1e1e;color:#e6e6e6">KinectUserViewer</span><span style="background:#1e1e1e;color:#92caf4"> Width</span><span style="background:#1e1e1e;color:#808080">=</span><span style="background:#1e1e1e;color:#569cd6">&quot;200&quot;</span><span style="background:#1e1e1e;color:#92caf4"> Height</span><span style="background:#1e1e1e;color:#808080">=</span><span style="background:#1e1e1e;color:#569cd6">&quot;100&quot;</span><span style="background:#1e1e1e;color:#92caf4"> VerticalAlignment</span><span style="background:#1e1e1e;color:#808080">=</span><span style="background:#1e1e1e;color:#569cd6">&quot;Top&quot;</span><span style="background:#1e1e1e;color:#808080">&gt;&lt;/</span><span style="background:#1e1e1e;color:#e6e6e6">k</span><span style="background:#1e1e1e;color:#808080">:</span><span style="background:#1e1e1e;color:#e6e6e6">KinectUserViewer</span><span style="background:#1e1e1e;color:#808080">&gt;</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#ababab"></span><span style="background:#1e1e1e;color:#808080">&lt;</span><span style="background:#1e1e1e;color:#e6e6e6">k</span><span style="background:#1e1e1e;color:#808080">:</span><span style="background:#1e1e1e;color:#e6e6e6">KinectRegion</span><span style="background:#1e1e1e;color:#808080">&gt;</span></li> <li>    <span style="background:#1e1e1e;color:#ababab"></span><span style="background:#1e1e1e;color:#808080">&lt;</span><span style="background:#1e1e1e;color:#e6e6e6">Grid</span><span style="background:#1e1e1e;color:#808080">&gt;</span></li> <li class="le-pavsc-even">        <span style="background:#1e1e1e;color:#ababab"></span><span style="background:#1e1e1e;color:#808080">&lt;</span><span style="background:#1e1e1e;color:#e6e6e6">local</span><span style="background:#1e1e1e;color:#808080">:</span><span style="background:#1e1e1e;color:#e6e6e6">UnityGestureProxyControl</span><span style="background:#1e1e1e;color:#92caf4"> Background</span><span style="background:#1e1e1e;color:#808080">=</span><span style="background:#1e1e1e;color:#569cd6">&quot;Aqua&quot;</span><span style="background:#1e1e1e;color:#808080">&gt;&lt;/</span><span style="background:#1e1e1e;color:#e6e6e6">local</span><span style="background:#1e1e1e;color:#808080">:</span><span style="background:#1e1e1e;color:#e6e6e6">UnityGestureProxyControl</span><span style="background:#1e1e1e;color:#808080">&gt;</span></li> <li>    <span style="background:#1e1e1e;color:#ababab"></span><span style="background:#1e1e1e;color:#808080">&lt;/</span><span style="background:#1e1e1e;color:#e6e6e6">Grid</span><span style="background:#1e1e1e;color:#808080">&gt;</span></li> <li class="le-pavsc-even"><span style="background:#1e1e1e;color:#ababab"></span><span style="background:#1e1e1e;color:#808080">&lt;/</span><span style="background:#1e1e1e;color:#e6e6e6">k</span><span style="background:#1e1e1e;color:#808080">:</span><span style="background:#1e1e1e;color:#e6e6e6">KinectRegion</span><span style="background:#1e1e1e;color:#808080">&gt;</span></li> </ol> </div> </div> </div> <h3>Conclusions</h3> <p>Here’s a video showing the resulting gestures in action:</p><iframe height="315" src="//www.youtube.com/embed/rRYvuVsk_7Q" frameborder="0" width="560" allowfullscreen></iframe> <p>&nbsp;</p> <p>An alternative to this would be to implement directly in the Unity environment using the <a href="http://msdn.microsoft.com/en-us/library/microsoft.kinect.input.kinectgesturerecognizer.aspx">KinectGestureRecognizer</a> which I suspect would be better from a perf perspective. The sample code for this project can be downloaded <a href="http://1drv.ms/1xaN50K">here</a> (please note that some paths appear to be hard-coded in the generated Unity script projects so this will prevent the solution from building without a bit of tweaking). </p>
