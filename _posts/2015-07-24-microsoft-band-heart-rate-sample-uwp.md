---
layout: single
title: Microsoft Band Heart Rate Sample &ndash; UWP
date: 2015-07-24 10:43
author_profile: true
comments: true
categories: [MS Band, msband, uwp, UWP, windows]
header:
    teaserlogo: 'assets/images/'
    teaser: 'assets/images/'
---
<p>Although very simple I thought this was worth blogging as I didn’t see too many UWP (Universal Windows Platform) samples using the Microsoft Band SDK. I gave a talk recently at the Microsoft IOT Hackathon at the Microsoft Offices in Reading which involved streaming the heart rate data from the band up to Azure event hubs and I wanted to create a UWP app for it. The first step is to invoke the Nuget package manager inside Visual Studio 2015 RC to add the Band SDK to my project</p> <p><a href="{{ site.baseurl }}/assets/images/2015/07/nuget.png"><img title="nuget" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="nuget" src="{{ site.baseurl }}/assets/images/2015/07/nuget_thumb.png" width="729" height="300"></a></p> <p>The current Nuget package for the band SDK doesn’t write the app manifest correctly for UWP so you need to make a slight modification to get the code to work. This is what it writes:</p> <p><a href="{{ site.baseurl }}/assets/images/2015/07/capabilitiesold.png"><img title="capabilitiesold" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="capabilitiesold" src="{{ site.baseurl }}/assets/images/2015/07/capabilitiesold_thumb.png" width="735" height="178"></a></p> <p>Removing what was added and running results in the following exception:</p> <p><a href="{{ site.baseurl }}/assets/images/2015/07/permissionsexception.png"><img title="permissionsexception" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="permissionsexception" src="{{ site.baseurl }}/assets/images/2015/07/permissionsexception_thumb.png" width="734" height="186"></a>&nbsp; </p> <p>Which hints at the problem in the Additional Information.</p> <p>For UWP change this to:</p> <p><a href="{{ site.baseurl }}/assets/images/2015/07/capabilitiesnew.png"><img title="capabilitiesnew" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="capabilitiesnew" src="{{ site.baseurl }}/assets/images/2015/07/capabilitiesnew_thumb.png" width="733" height="198"></a></p> <p>Then you can use the following code (non-production ready <img class="wlEmoticon wlEmoticon-smile" style="border-top-style: none; border-left-style: none; border-bottom-style: none; border-right-style: none" alt="Smile" src="{{ site.baseurl }}/assets/images/2015/07/wlEmoticon-smile.png">) to display the heart rate data:</p><script src="https://gist.github.com/peted70/d6173bd7e53c3281d08d.js"></script>   <p>Here’s the resulting app running on my desktop:</p> <p><a href="{{ site.baseurl }}/assets/images/2015/07/uwpapp.png"><img title="uwpapp" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="uwpapp" src="{{ site.baseurl }}/assets/images/2015/07/uwpapp_thumb.png" width="394" height="472"></a></p> <p>Code is on Github here <a title="https://github.com/peted70/msband-hr-uwp-" href="https://github.com/peted70/msband-hr-uwp-">https://github.com/peted70/msband-hr-uwp-</a></p>
